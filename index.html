<h1>VPN add-on testing page</h1>

<div>Use the dev-menu to set a custom add-on URL. Do not open these URLs directly because you will see a 404 page.</div>

<div id="content"></div>

<script>
const presets = [
  { 
    title: "Empty manifest",
    expectedBehavior: "the app should remove all the pre-fetch add-ons. No addons should be visible.",
    url: "/empty_manifest/",
  },
  { 
    title: "Invalid manifest",
    expectedBehavior: "the app should keep the current add-ons.",
    url: "/broken_manifest/",
  },
  { 
    title: "Not found manifest",
    expectedBehavior: "the app should keep the current add-ons.",
    url: "/404_manifest/",
  },
  { 
    title: "One-addOn-only manifest",
    expectedBehavior: "the app should remove all the existing add-ons and replace them with a single add-on file.",
    url: "/single_manifest/",
  },
];

const div = document.createElement('content');

let urlString = window.location.origin;
if (window.location.pathname !== '/' && window.location.pathname !== '') {
  urlString += window.location.pathname.split('/').filter(a => a != 'index.html').join('/');
}

presets.forEach(preset => {
  const title = document.createElement('h4');
  title.textContent = preset.title;
  content.appendChild(title);

  const ebd = document.createElement('div');
  content.appendChild(ebd);

  const ebt = document.createElement('strong');
  ebt.textContent = "Expected Behavior: ";
  ebd.appendChild(ebt);

  const eb = document.createElement('span');
  eb.textContent = preset.expectedBehavior;
  ebd.appendChild(eb);

  const urld = document.createElement('div');
  content.appendChild(urld);

  const urlt = document.createElement('strong');
  urlt.textContent = "URL: ";
  urld.appendChild(urlt);

  const url = document.createElement('a');
  url.href = urlString + preset.url;
  url.textContent = url.href
  urld.appendChild(url);
});
</script>
